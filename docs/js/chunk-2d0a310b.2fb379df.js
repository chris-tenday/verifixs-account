(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a310b"],{"011e":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"d-flex align-items-center justify-content-center auth-box",staticStyle:{overflow:"hidden",height:"100vh",width:"100%"},attrs:{"data-aos":"zoom-in"}},[s("div",{staticClass:"container"},[s("div",{staticClass:"row d-flex align-items-center justify-content-center"},[s("div",{staticClass:"col-xl-5 col-lg-5 col-md-6 col-sm-12 col-12"},[s("div",{staticClass:"card auth-box-shadow"},[s("div",{staticClass:"card-body"},[s("img",{staticClass:"mb-3",staticStyle:{width:"180px"},attrs:{src:"assets/images/logos/logo_color.svg",title:"logo"}}),t.reset?s("div",[s("p",{staticClass:"text-center"},[t._v("Veuillez réinitialiser votre mot de passe !")]),s("form",{attrs:{id:"form-reset","data-aos":"fade-right",novalidate:""},on:{submit:function(e){return e.preventDefault(),t.resetPass.apply(null,arguments)}}},[s("div",{staticClass:"mb-3"},[s("label",{staticClass:"form-label",attrs:{for:"identifiant"}},[t._v("Nouveau mot de passe")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.newPass,expression:"form.newPass"}],staticClass:"form-control",attrs:{id:"newPass",type:"password",placeholder:"Saisir votre nouveau mot de passe...",required:""},domProps:{value:t.form.newPass},on:{input:function(e){e.target.composing||t.$set(t.form,"newPass",e.target.value)}}}),s("span",{staticClass:"invalid-feedback text-start"},[t._v("Entrer votre nouveau mot de passe ! ")]),t.pwdError?s("div",{staticClass:"text-danger small"},[t._v(" "+t._s(t.pwdError)+" ")]):t._e()]),s("div",{staticClass:"mb-3"},[s("label",{staticClass:"form-label",attrs:{for:"identifiant"}},[t._v("Confirmation mot de passe")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.confirm,expression:"form.confirm"}],staticClass:"form-control",attrs:{id:"confirmPass",type:"password",placeholder:"Retaper votre nouveau mot de passe...",required:""},domProps:{value:t.form.confirm},on:{input:function(e){e.target.composing||t.$set(t.form,"confirm",e.target.value)}}}),s("span",{staticClass:"invalid-feedback text-start"},[t._v("confirmer nouveau mot de passe ! ")]),t.isDifferent?s("div",{staticClass:"text-danger small"},[t._v(" Le mot de passe saisi ne correspond pas ! ")]):t._e()]),s("div",{staticClass:"mb-3 mb-0 d-grid"},[s("button",{staticClass:"btn text-white border-0 btn-success",attrs:{type:"submit",disabled:t.isLoading}},[t.isLoading?s("span",{staticClass:"spinner-border spinner-border-sm me-1"}):s("i",{staticClass:"bi bi-check-circle me-1"}),t._v(" Réinitialiser maintenant ")])])])]):s("div",[t.isOtp?s("div",{attrs:{"data-aos":"fade-up"}},[s("p",{staticClass:"text-center"},[t._v("Entrer le code reussi à votre numéro de téléphone "),s("strong",{staticClass:"text-primary"},[t._v(t._s(t.form.phone.substring(0,6))),s("small",[t._v("°°°°°°°°°")]),t._v(t._s(t.form.phone.slice(-2)))]),t._v(" !")]),s("otp-input",{ref:"otpInput1",attrs:{"num-inputs":6,"should-auto-focus":!0,separator:"-","input-type":"number"},on:{"on-change":t.emptyField,"on-complete":t.checkOtp}}),s("div",{staticClass:"d-flex mt-2 align-center justify-content-center align-items-center"},[s("p",[t._v("Vous n'avez reussi le code ? "),s("a",{staticClass:"link-dark-info fw-semi-bold",attrs:{href:"javascript:void(0)",disabled:t.isLoading},on:{click:t.sendOtp}},[t._v("Renvoyez le code "),t.isLoading?s("i",{staticClass:"mx-2 fa fa-spinner fa-spin"}):t._e()])])])],1):s("form",{attrs:{"data-aos":"fade-left",id:"form-reset",novalidate:""},on:{submit:function(e){return e.preventDefault(),t.resetPwdSendOtp.apply(null,arguments)}}},[s("div",{staticClass:"mb-3 form-group"},[s("label",{staticClass:"form-label",attrs:{for:"phone"}},[t._v("Entrer le numéro de téléphone lié à votre compte")]),s("phone-input",{staticClass:"form-control p-0",attrs:{id:"phone",size:"lg",translations:t.translations,"default-country-code":"CD","no-example":!0,required:!0,color:"#FF0000"},on:{update:t.updatePhone},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}}),s("span",{staticClass:"invalid-feedback"},[t._v("Entrer votre numéro pour recevoir un code de réinitialisation ! ")])],1),s("div",{staticClass:"mb-3 mb-0 d-grid"},[s("button",{staticClass:"btn text-white border-0 btn-info",attrs:{type:"submit",disabled:t.isLoading}},[t.isLoading?s("span",{staticClass:"spinner-border spinner-border-sm me-1"}):s("i",{staticClass:"bi bi-lock-fill me-1"}),t._v(" Réinitialiser ")])])])])])])])])])])},a=[],o={name:"Reset-Pass",data(){return{isLoading:!1,isOtp:!1,reset:!1,pwdError:"",isPwValid:!1,isDifferent:!1,phone:"",translations:{countrySelectorLabel:"Code pays",countrySelectorpwdError:"Choisir un pays",phoneNumberLabel:"Ex. 810000000",example:"Ex. 810000000"},form:{phone:"",newPass:"",confirm:"",clientId:""}}},methods:{resetPwdSendOtp(t){const e=document.querySelectorAll("#form-reset");Array.from(e).forEach(e=>{e.checkValidity()||(t.preventDefault(),t.stopPropagation(),e.classList.add("was-validated")),e.checkValidity()&&this.sendOtp()})},sendOtp(){this.isLoading=!0,this.emptyField(),this.$store.dispatch("resetPassSendOtp",this.form.phone).then(t=>{this.isLoading=!1;let e=t.reponse;"success"===e.status&&(this.isOtp=!0)}).catch(t=>this.isLoading=!1)},checkOtp(t){let e={phone:this.form.phone,otp:t};this.isLoading=!0,this.$store.dispatch("resetPassCheckOtp",e).then(t=>{if(this.isLoading=!1,void 0!==t.error)return this.$swal({icon:"warning",title:"Echec !",text:"Utilisateur ou code invalide !",timer:3e3,showConfirmButton:!1}),void(this.isOtp=!1);let e=t.client;void 0!==e&&(this.reset=!0,this.form.clientId=e.client_id)}).catch(t=>this.isLoading=!1)},resetPass(t){const e=document.querySelectorAll("#form-reset");Array.from(e).forEach(e=>{if(e.checkValidity()||(t.preventDefault(),t.stopPropagation(),e.classList.add("was-validated")),e.checkValidity()){if(!this.isPwValid)return;this.isLoading=!0;let t={client_id:this.form.clientId,pass:this.form.newPass};this.$store.dispatch("resetPass",t).then(t=>{this.isLoading=!1;let e=t.reponse;"success"===e.status?this.$swal({title:"Réinitialisation effectuée",text:`Le mot de passe du compte de ${e.client.nom} a été mis à jour  !\nveuillez utiliser votre nouveau mot de passe pour vous connecter à votre compte!`,timer:4e3,showConfirmButton:!1}).then(t=>{this.$router.go(-1)}):this.$swal({title:"Echec de Réinitialisation",text:"Vos tentatives de réinitialisation du mot de passe ont échouées",timer:4e3,showConfirmButton:!1}).then(t=>{this.reset=!1,this.isOtp=!1})}).catch(t=>this.isLoading=!1)}})},updatePhone(t){this.form.phone=t.e164},emptyField(t){this.$emit("onChanged",t)},validatePassword(){var t=0,e=0,s=0,i=0,a=/[`!@#$%^&*()_+\-=\\|,.`<>?~]/;if(!(this.form.newPass.length>=8))return this.pwdError="Votre mot de passe doit contenir minimum 8 caractères",!1;for(var o of this.form.newPass)isNaN(1*o)?a.test(o)?i++:o!==o.toLowerCase()?e++:o!==o.toUpperCase()&&(s+=1):t+=1;return t||e||s||i?0==t?(this.pwdError="Votre mot de passe doit contenir au moins 1 chiffre",!1):0==e?(this.pwdError="Votre mot de passe doit contenir au moins 1 lettre en majuscule",!1):0==s?(this.pwdError="Votre mot de passe doit contenir au moins 1 lettre en minuscule",!1):0==i?(this.pwdError="Votre mot de passe doit contenir au moins 1 caractère spécial",!1):(this.pwdError="",!0):void 0}},watch:{phone(t){if(null!==t){let e=(""+t)[0];if("0"===e)return void(this.phone="");if(t.length>9)return void(this.phone="")}},"form.confirm"(t){this.form.newPass!==t?this.isDifferent=!0:this.isDifferent=!1},"form.newPass"(t){t&&(this.isPwValid=this.validatePassword())}}},r=o,n=s("2877"),l=Object(n["a"])(r,i,a,!1,null,null,null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d0a310b.2fb379df.js.map